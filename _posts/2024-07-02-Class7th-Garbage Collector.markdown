---
layout: post
title: Garbage Collector
category: c#
---

## 가비지 컬렉터

시스템에서 더이상 사용하지 않는 메모리를 찾은 다음
자동으로 해제하는 기법입니다.
프로그래머가 직접 메모리의 관리를 하지 않아도 된다는 장점이 있습니다.

메모리 공간을 확보한 뒤 메모리 파편화 현상을 해결하기 위해
메모리 압축 작업을 실행합니다.

#### 메모리 파편화 or 단편화
메모리 공간이 분리되어 차지하고 있는 현상

ex) 10Byte의 여유공간이 있더라도 실제 메모리공간은 4Byte,6Byte의 공간으로 나누어져
6Byte초과의 데이터를 저장못하는 현상

## 세대 기반 가비지 컬렉터(Generation of GC)

처음 가비지 컬렉터가 작동시 데이터를 0세대 가비지로 분류하며 메모리 해제후 
남아있는 가비지는 1세대 가비지로 올라가는 형식입니다.
1세대 가비지컬렉터는 바로 작동하지 않으며 0세대 가비지 컬렉터가 여러번 순환후 작동됩니다.

ex) 0세대 10번 작동시 1세대 1번 작동

### LOH(Large Object Heap)
대형 객체의 경우 LOH(Large Object Heap)로 분류되어 0세대가 아닌 2세대로 분류됩니다.
여기서 대형객체의 기준은 85KB로 그보다 작은 객체는 일반적인 SOH(Small Object Heap)으로 분류됩니다.
LOH는 메모리 복사비용이 커서 GC 작동시 메모리 압축작업을 하지 않는데 이로인해 메모리 파편화 현상이 발생하게 됩니다.
LOH는 Full CG 작동시에만 메모리 압축을 할 수 있습니다. 
